# Generated by stepconf 1.1 at Fri Jul 18 22:27:08 2025
# If you make changes to this file, they will be
# overwritten when you run stepconf again



#   Zamanlama: Tüm step/dir sinyalleri FPGA saat hızında (50-100MHz) çalışır, 
#   HAL ise LinuxCNC servo hızında (1kHz) güncellenir.


[EMC]
MACHINE = fpgaLPKF
DEBUG = 0
VERSION = 1.1

[DISPLAY]
#DISPLAY = gmoccapy
DISPLAY = axis
EDITOR = gedit
POSITION_OFFSET = RELATIVE
POSITION_FEEDBACK = ACTUAL
ARCDIVISION = 64
GRIDS = 1mm 2mm 5mm 10mm 20mm 50mm 100mm 1in  
MAX_FEED_OVERRIDE = 1.2
MIN_SPINDLE_OVERRIDE = 0.5
MAX_SPINDLE_OVERRIDE = 1.2
DEFAULT_LINEAR_VELOCITY = 0.42
MIN_LINEAR_VELOCITY = 0
MAX_LINEAR_VELOCITY = 4.17
DEFAULT_ANGULAR_VELOCITY = 4.00
MIN_ANGULAR_VELOCITY = 0
MAX_ANGULAR_VELOCITY = 10.00
CYCLE_TIME = 0.100
INTRO_GRAPHIC = linuxcnc.gif
INTRO_TIME = 5
PROGRAM_PREFIX = /home/tevfik/linuxcnc/nc_files
INCREMENTS = 5mm 1mm .5mm .1mm .05mm .01mm .005mm
#PYVCP = custompanel.xml

PYVCP =test.xml     
#==>> bagımsız olması pasif et.a_eksen_lpkf.hal file kısmını aktif et 
#consol loadusr   pyvcp test.xml



[KINS]
JOINTS = 4
KINEMATICS = trivkins coordinates=XYZA

[FILTER]
PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image
PROGRAM_EXTENSION = .py Python Script
PROGRAM_EXTENSION = .nc,.tap G-Code File
png = image-to-gcode
gif = image-to-gcode
jpg = image-to-gcode
py = python

[TASK]
TASK = milltask
CYCLE_TIME = 0.010

[RS274NGC]
PARAMETER_FILE = linuxcnc.var

SUBROUTINE_PATH = macros
REMAP=M600  modalgroup=6 ngc=master-caki-olcme
REMAP=M6    modalgroup=6 ngc=cakiyi-degistirver2
REMAP=M601  modalgroup=6 ngc=probe-hole-merkez

# her gcode M600 ilave edilecek   


[EMCMOT]

EMCMOT = motmod
COMM_TIMEOUT    =       1.0
BASE_PERIOD 	=   34000
SERVO_PERIOD 	= 1000000

[HAL]
HALUI = halui
HALFILE = fpgaLPKF.hal
HALFILE = alias.hal
HALFILE = fpgaLPKFaxis.hal
HALFILE = fpgaLPKFinputOutput.hal
HALFILE = custom.hal
POSTGUI_HALFILE = postgui_call_list.hal

[TRAJ]
COORDINATES =  X Y Z A
LINEAR_UNITS = mm
ANGULAR_UNITS = degree
DEFAULT_LINEAR_VELOCITY = 0.166
MAX_LINEAR_VELOCITY = 4.166




NO_FORCE_HOMING = 1 
POSITION_FILE = position.txt 
#kullanılırken eksen hareket sınırlarınızı bilmeyecek

[EMCIO]
EMCIO = io
CYCLE_TIME = 0.100
TOOL_TABLE = tool.tbl

#*** AXIS_X *******************************
[AXIS_X]
MAX_VELOCITY = 4.166
MAX_ACCELERATION = 2.5
MIN_LIMIT = -1.1
MAX_LIMIT = 323.01

[JOINT_0]
TYPE = LINEAR
HOME = 0.0
MIN_LIMIT = -1.1
MAX_LIMIT = 323.01
MAX_VELOCITY = 4.166
MAX_ACCELERATION = 2.5
STEPGEN_MAXACCEL = 6.25

SCALE = 253.1788                                   
#s1 s2 s3  s4 s5 s6 
# 1 0 0    off ON ON      800  pulse 1mm= 253.1788          akım 2.0 amper
# 1 0 0    ON  ON ON      800  pulse 1mm= 253.1788          akım 0.5 amper
# 0 1 1     0   1  1      1600 pulse 1mm= 505.314114827     akım 2.0 amper

#SCALE = 290
#SCALE = 505.314114827


FERROR = 6.8
#maximum hızdaki sapma miktarı 2
MIN_FERROR = 1.6
#minimum hızdaki sapma miktarı 0.5
HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = -0.200000
HOME_LATCH_VEL = -0.05
HOME_SEQUENCE = 2





# - Setup of timings
#           _____         _____               _____
#STEP  ____/     \_______/     \_____________/     \______
#          |     |       |     |             |     |
#Time      |-(1)-|--(2)--|-(1)-|--(3)--|-(4)-|-(1)-|
#                                      |__________________
#DIR   ________________________________/
# (1) - STEPLEN
# (2) - STEPSPACE
# (3) - DIRHOLD
# (4) - DIRSETUP
# these are in nanoseconds
DIRSETUP   = 5000					
DIRHOLD    = 5000
STEPLEN    = 5000
STEPSPACE  = 5000
STEP_SCALE = 253.1788    					
ENABLE-MOTOR_INVERT_OUTPUT = TRUE

#ENCODER_SCALE = 480
#ENCODER_x4-mode = TRUE





#******************************************

#*** AXIS_Y *******************************
[AXIS_Y]
MAX_VELOCITY = 4.166
MAX_ACCELERATION = 2.5
MIN_LIMIT = -1.1
MAX_LIMIT = 145.0

[JOINT_1]
TYPE = LINEAR
HOME = 0.0
MIN_LIMIT = -1.101
MAX_LIMIT = 145.0
MAX_VELOCITY = 4.166
MAX_ACCELERATION = 2.5
STEPGEN_MAXACCEL = 6.25



SCALE =251.9685


#s1 s2 s3  s4 s5 s6 
# 1  0  0   0 0  0         800pulse 1mm  SCALE = 253.1788     akım 0.5 amper
# 0  1  1   0 0  0         400pulse 1mm  SCALE = ???????   akım 0.5 amper
# 0  1  0   0 0  0        1600pulse 1mm  SCALE = ???????   akım 0.5 amper
# 0  0  1   0 0  0        3200pulse 1mm  SCALE = ??????    akım 0.5 amper
# 0  0  0   0 0  0        6400pulse 1mm  SCALE = ??????     akım 0.5 amper
FERROR = 6.6
# sıkışma durumuna göre 1 hassas  10 ince 100 kaba hatalar :) Following Error
MIN_FERROR =1.6
HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = 0.2000000
HOME_LATCH_VEL = 0.05
HOME_SEQUENCE = 1



#******************************************

#*** AXIS_Z *******************************
[AXIS_Z]
MAX_VELOCITY = 2.166
MAX_ACCELERATION = 5.0
MIN_LIMIT = -115.0
MAX_LIMIT = 0.001

[JOINT_2]
TYPE = LINEAR
HOME = 0.0
MIN_LIMIT = -115.0
MAX_LIMIT = 0.001
MAX_VELOCITY = 2.166
MAX_ACCELERATION = 5.0
STEPGEN_MAXACCEL = 6.25
SCALE = 323.45
FERROR =100.4
MIN_FERROR =100.25

HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = 1.000000
HOME_LATCH_VEL = 0.05
HOME_SEQUENCE = 0


# - Setup of timings
#           _____         _____               _____
#STEP  ____/     \_______/     \_____________/     \______
#          |     |       |     |             |     |
#Time      |-(1)-|--(2)--|-(1)-|--(3)--|-(4)-|-(1)-|
#                                      |__________________
#DIR   ________________________________/
# (1) - STEPLEN
# (2) - STEPSPACE
# (3) - DIRHOLD
# (4) - DIRSETUP
# these are in nanoseconds
DIRSETUP   = 5000					
DIRHOLD    = 5000
STEPLEN    = 5000
STEPSPACE  = 5000
STEP_SCALE = 323.45					
ENABLE-MOTOR_INVERT_OUTPUT = TRUE

#ENCODER_SCALE = 480
#ENCODER_x4-mode = TRUE



#******************************************




#*** AXIS_A *******************************
[AXIS_A]
MAX_VELOCITY = 10.0
MAX_ACCELERATION = 50.0
MIN_LIMIT = -999999.0
MAX_LIMIT = 999999.0

[JOINT_3]



HOME_SEARCH_VEL = 1.0      
#; Arama hızı (birim/saniye)
HOME_LATCH_VEL = 0.5        
#; Yavaş latch hızı (Z sinyalini yakalamak için)
HOME_USE_INDEX = NO         
#; Fiziksel home switch kullanılıyor (Z sinyali switch gibi davranacak)

TYPE = ANGULAR
HOME = 0.0
MIN_LIMIT = -999999.0
MAX_LIMIT = 999999.0
#MAX_VELOCITY = 25.0
#AX_ACCELERATION = 100.0
#STEPGEN_MAXACCEL = 125
#saniyedeki 12.5 derece dönme acısı

MAX_VELOCITY =10.05
## 0.5
MAX_ACCELERATION =50
STEPGEN_MAXACCEL = 6.125
##STEPGEN_MAXVEL = 11
##saniyede 125 derece

##SCALE = 44.447
#SCALE = 1000.0 #; 2000 pulse/rev (1x) + 1:173 redüktör
SCALE = 960

HOME_OFFSET = 0.0

FERROR = 50.0  
#; 50 pulse ≈ 0.27 derece (50/666.666)
MIN_FERROR = 5.25  
#; 5.25 pulse ≈ 0.028 derece (5.25/666.666)

#******************************************
