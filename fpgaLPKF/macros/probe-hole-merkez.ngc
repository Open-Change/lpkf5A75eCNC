
O<probe-hole-merkez> SUB

M70                                            ( save current modal state )
M9                                             ( turn off coolant, will be restored on return if it was on )
M5                                             ( turn off spindle, cannot be on during the probe )

;M72                                            ( restore modal state )


;#1000=28 ;max radius  deligin iç yaricapı

g54
G21
 F180

g90             (g90 mutlak mesafe modunu ayarla    gercek koordinat) 
g53 g1 z-10     (yukarıya cık)
g53 g1 x228 y52 (delik merkezine git)
g53 g1 z-78     (deliğin içine gir)
#1000=28 ;max radius  deligin iç yaricapı
 F50 (yavas hızla yaklaş)
;G91 G38.3 Z-1      (temas halinde dur)
G90 G38.3 Z-78.2   (deliğin içine en fazla bu kadar yaklaş)  
#1001=#5061        (x yeri     5061-5069 - Coordinates of a G38 probe result X, Y, Z, A, B, C, U, V & W)
#1002=#5062

G91 G38.2 X#1000    (g91 artan mesafe modunu ayarla ) 
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001  ;ilk orta nokta x

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002 ;ilk orta nokta y


G91 G38.2 X#1000
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001  ;;  orta noktaya gore  x

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002    ;  orta noktaya gore  y


F1

G90 G0 X[#1003-0.1]
G91 G38.2 X1.010
#1003=#5061
G90 G0 X[#1004+0.1]
G91 G38.2 X-1.010
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G90 G0 Y[#1005-0.1]
G91 G38.2 Y1.010
#1005=#5062
G90 G0 Y[#1006+0.1]
G91 G38.2 Y-1.010
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002
;G91 G1 F1 X[0-#5071] Y[0-#5072] (anlamadım belki merkezden degdiği mesafe kadar geri gel merkezde kal)
G90

#1007=[#1003-#1004+[6.0/25.4]]
#1008=[#1005-#1006+[6.0/25.4]]
#1009=[[#1007+#1008]/2]
#1010=[atan[#1002]/[#1001]]
#1011=[sqrt[[#1001*#1001]+[#1002*#1002]]]
#1012=#5221  ;eski mx degeri
#1013=#5222  ;eski my degeri
;(debug,Dia #1009 Ang #1010 Dist #1011)
; g0   z0
;m0


;(debug,cap #1009 mx=#5221 my=#5222)

; G10  L 2   P 1  X 0    Y 0  Z 0   ;
  G10  L 20  P 1  X 225  Y 52    ;g54 de x226 y52  z eksen de degişiklik yok line 17 18
  
 
  
  
  #1012=[#1012-#5221]  ;eski mx degeri
  #1013=[#1013-#5222]  ;eski my degeri
  (debug,cap #1009 deltax=#1012 deltay=#1013)
; m0
; (debug,oldumu acaba)
 g1 f120 z-10
  
 m72 ( restore modal state )
 
O<probe-hole-merkez> ENDSUB
 
 
M2
